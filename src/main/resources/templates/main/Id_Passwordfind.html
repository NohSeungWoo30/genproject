<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>아이디/비밀번호 찾기</title>
    <!-- CSS 파일 경로는 실제 프로젝트에 맞게 수정해주세요 -->
    <link rel="stylesheet" href="/css/Id_Passwordfind.css" />
</head>
<body>
<form action="/find-account-id" method="POST" class="container-form">
    <div class="tab-container">
        <div class="tab-item" role="tab" aria-selected="true" data-tab="id">아이디 찾기</div>
        <div class="tab-item" role="tab" aria-selected="false" data-tab="pw">비밀번호 찾기</div>
    </div>

    <div class="form-content" id="search-id">
        <div class="form-group">
            <label for="name" class="form-label">이름</label>
            <input type="text" id="name" name="name" class="form-input" placeholder="이름" required />
        </div>
        <div class="form-group">
            <label for="phone" class="form-label">휴대폰번호</label>
            <div class="input-group">
                <input type="tel" id="phone" name="phone" class="form-input-grouped" placeholder="휴대폰 번호 (- 없이 입력)" required />
                <button type="button" id="verify-phone" class="btn-verify">확인</button>
            </div>
        </div>

    </div>

    <!-- [수정] 비밀번호 찾기 폼에서 휴대폰 번호 입력 부분 삭제 -->
    <div class="form-content" id="search-pw" style="display:none;">
        <div class="form-group">
            <label for="userId" class="form-label">아이디</label>
            <input type="text" id="userId" name="userId" class="form-input" placeholder="아이디" required />
        </div>
    </div>

    <div class="form-actions">
        <button type="submit" class="btn-submit">아이디 찾기</button>
        <p class="login-redirect-link" style="margin-top: 15px;">
            <a href="login.html">찾으셨나요? 로그인 하러가기</a>
        </p>
    </div>
</form>

<script>
    document.addEventListener('DOMContentLoaded', function() {
      const tabs = document.querySelectorAll('.tab-item');
      const submitBtn = document.querySelector('.btn-submit');
      const form = document.querySelector('form.container-form');
      const verifyBtn = document.getElementById('verify-phone');
      const searchIdForm = document.getElementById('search-id');
      const searchPwForm = document.getElementById('search-pw');
      const codeContainer = document.getElementById('code-container');

      tabs.forEach(tab => {
        tab.addEventListener('click', () => {
          const tabType = tab.dataset.tab;

          tabs.forEach(t => t.setAttribute('aria-selected', 'false'));
          tab.setAttribute('aria-selected', 'true');

          if (tabType === 'id') {
            form.action = '/find-account-id';
            submitBtn.textContent = '아이디 찾기';
            searchIdForm.style.display = 'block';
            searchPwForm.style.display = 'none';
          } else {
            form.action = '/find-account-pw';
            submitBtn.textContent = '비밀번호 찾기';
            searchIdForm.style.display = 'none';
            searchPwForm.style.display = 'block';
          }
        });
      });

      verifyBtn.addEventListener('click', function() {
        const phoneInput = document.getElementById('phone');
        const nameInput = document.getElementById('name');

        const phoneVal = phoneInput.value.trim();
        const nameVal = nameInput.value.trim();

        if (!nameVal) {
          alert('이름을 입력해주세요.');
          nameInput.focus();
          return;
        }

        if (!phoneVal) {
          alert('휴대폰번호를 입력해주세요.');
          phoneInput.focus();
          return;
        }

        // 휴대폰 번호 형식 유효성 검사
        const phoneRegex = /^010\d{8}$/;
        if (!phoneRegex.test(phoneVal)) {
            alert('올바른 휴대폰 번호 형식을 입력해주세요. (예: 01012345678)');
            phoneInput.focus();
            return;
        }

        // 모든 검증 통과 시
        alert('확인되었습니다.');
        codeContainer.style.display = 'block';
      });

    });
</script>
</body>
</html>
