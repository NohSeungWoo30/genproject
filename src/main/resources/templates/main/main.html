<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- ===== 프로젝트 공통 스타일 ===== -->
  <link rel="stylesheet" href="/css/mainstyle.css" />
  <link rel="stylesheet" href="/css/dev-login.css" />
  <link rel="stylesheet" href="/css/notify.css" />
  <link rel="stylesheet" href="/css/filter.css" /> <!-- simple.html 스타일 분리 -->

  <!-- ===== 외부 라이브러리 ===== -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <!-- ionicons: main, simple 둘 다 필요 -->
  <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
  <!-- noUiSlider: simple.html용 -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nouislider@15.7.0/dist/nouislider.min.css">
  <script src="https://cdn.jsdelivr.net/npm/nouislider@15.7.0/dist/nouislider.min.js"></script>

  <title>메인 페이지</title>
</head>

<body>
<div class="_1920-w-light">

  <!-- ─── 상단 네비게이션 ─── -->
  <header class="container-nav">
    <div class="nav-left">
      <a href="main"><img class="logo" src="/img/icons/Group 17.png" alt="M 로고"></a>
    </div>

    <div class="nav-center">
      <img src="/img/봄.png" class="nav-img" alt="그림10">
      <img src="/img/여름.png" class="nav-img" alt="그림10">
      <img src="/img/가을.png" class="nav-img" alt="그림10">
      <img src="/img/겨울.png" class="nav-img" alt="그림10">
    </div>
    <div class="nav-right" id="navRight">
      <!-- 로그인 전 기본 표시 → 스크립트에서 교체 -->
      <a href="user/login" class="login-link">로그인ㆍ회원가입</a>
    </div>
  </header>

  <!-- ─── 하단 고정 네비 (모바일 bottom‑nav 스타일) ─── -->
  <section class="bottom-nav-wrapper">
    <nav class="bottom-nav">
      <a href="group/create" class="bottom-link">모임 생성</a>
      <a href="group/meetinglist" class="bottom-link">모임 목록</a>
      <a href="#" class="bottom-link">상품 목록</a>
      <a th:href="@{/posts}" class="bottom-link">자유 게시판</a>
    </nav>
  </section>

  <!-- ─── 메인 배너 ─── -->
  <section class="main-banner">
    <div class="banner-slide-wrapper">
      <img src="/img/고기.png" class="banner-image" />
      <img src="/img/콘서트.png" class="banner-image" />
      <img src="/img/러닝.png" class="banner-image" />
    </div>
    <button class="banner-prev">←</button>
    <button class="banner-next">→</button>
  </section>



  <!-- ─── 카테고리 아이콘 링크 ─── -->
  <nav class="category-links">
    <a href="group/meetinglist?mainCategoryId=1" class="cat-link">
      <img src="/img/icons/ball1.png" alt="운동/액티비티 아이콘" class="cat-icon" />
      <span class="cat-text">운동/액티비티</span>
    </a>

    <a href="group/meetinglist?mainCategoryId=2" class="cat-link">
      <img src="/img/icons/art1.png" alt="문화/예술 아이콘" class="cat-icon" />
      <span class="cat-text">문화/예술</span>
    </a>

    <a href="group/meetinglist?mainCategoryId=3" class="cat-link">
      <img src="/img/icons/book1.png" alt="지식/스터디 아이콘" class="cat-icon" />
      <span class="cat-text">지식/스터디</span>
    </a>

    <a href="group/meetinglist?mainCategoryId=4" class="cat-link">
      <img src="/img/icons/food1.png" alt="음식/카페 아이콘" class="cat-icon" />
      <span class="cat-text">음식/카페</span>
    </a>

    <a href="group/meetinglist?mainCategoryId=5" class="cat-link">
      <img src="/img/icons/travel1.png" alt="여행/탐험 아이콘" class="cat-icon" />
      <span class="cat-text">여행/탐험</span>
    </a>

    <a href="group/meetinglist?mainCategoryId=6" class="cat-link">
      <img src="/img/icons/game1.png" alt="게임/오락 아이콘" class="cat-icon" />
      <span class="cat-text">게임/오락</span>
    </a>

    <a href="group/meetinglist?mainCategoryId=7" class="cat-link">
      <img src="/img/icons/game1.png" alt="게임/오락 아이콘" class="cat-icon" />
      <span class="cat-text">반려동물/자연</span>
    </a>

    <a href="group/meetinglist?mainCategoryId=8" class="cat-link">
      <img src="/img/icons/build1.png" alt="만들기/공예 아이콘" class="cat-icon" />
      <span class="cat-text">만들기/공예</span>
    </a>

    <a href="group/meetinglist?mainCategoryId=9" class="cat-link">
      <img src="/img/icons/social3.png" alt="소셜/친목 아이콘" class="cat-icon" />
      <span class="cat-text">소셜/친목</span>
    </a>

    <a href="group/meetinglist?mainCategoryId=10" class="cat-link">
      <img src="/img/icons/guitar1.png" alt="기타 아이콘" class="cat-icon" />
      <span class="cat-text">기타</span>
    </a>
  </nav>

  <!-- ─── 최신 모임 (가로 스크롤 카드) ─── -->
  <section class="container2">
    <span>최근 생성 모임</span>
    <div class="flex-row">
      <!-- 1 최근 생성 모임 -->
      <div th:each="gd_group : ${groupByCreateDate}" th:data-group-idx="${gd_group.groupIdx}" class="card">
        <div class="card-thumb">
          <img th:if="${gd_group.groupImgUrl != null and !#strings.isEmpty(gd_group.groupImgUrl)}"
               th:src="@{${gd_group.groupImgUrl}}" />
          <img th:unless="${gd_group.groupImgUrl != null and !#strings.isEmpty(gd_group.groupImgUrl)}"
               th:src="@{/img/noImage.png}" />
        </div>
        <div class="card-info">
          <div class="card-category">
            <span th:text="${gd_group.district}"></span> · <span th:text="${gd_group.categoryMain.categoryMainName}"></span>
          </div>
          <div class="card-title" th:text="${gd_group.title}">
          </div>
          <div class="card-date" th:text="${#temporals.format(gd_group.groupDate, 'yyyy.MM.dd(E) HH:mm')}"></div>
        </div>
      </div>
    </div>
  </section>

  <section class="container2">
    <span>활발한 모임(지역)</span>
    <div class="flex-row">
      <!-- 2 카테고리가 많은 인기 모임순 -->
      <div th:each="groupCategory : ${groupByCategory}" th:data-group-idx="${groupCategory.groupIdx}" class="card">
        <div class="card-tzhumb">
          <img th:if="${groupCategory.groupImgUrl != null and !#strings.isEmpty(groupCategory.groupImgUrl)}"
               th:src="@{${groupCategory.groupImgUrl}}" />
          <img th:unless="${groupCategory.groupImgUrl != null and !#strings.isEmpty(groupCategory.groupImgUrl)}"
               th:src="@{/img/noImage.jpg}" />
        </div>
        <div class="card-info">
          <div class="card-category">
            <span th:text="${groupCategory.district}"></span> · <span th:text="${groupCategory.categoryMain.categoryMainName}"></span>
          </div>
          <div class="card-title" th:text="${groupCategory.title}">
          </div>
          <div class="card-date" th:text="${#temporals.format(groupCategory.groupDate, 'yyyy.MM.dd(E) HH:mm')}"></div>
        </div>
      </div>
    </div>
  </section>

  <section class="container2">
    <span>모임 날짜 임박</span>
    <div class="flex-row">
      <!-- 3 모임 날짜 임박순 -->
      <div th:each="groupDate : ${groupByGroupDate}" th:data-group-idx="${groupDate.groupIdx}" class="card">
        <div class="card-thumb">
          <img th:if="${groupDate.groupImgUrl != null and !#strings.isEmpty(groupDate.groupImgUrl)}"
               th:src="@{${groupDate.groupImgUrl}}" />
          <img th:unless="${groupDate.groupImgUrl != null and !#strings.isEmpty(groupDate.groupImgUrl)}"
               th:src="@{/img/noImage.jpg}" />
        </div>
        <div class="card-info">
          <div class="card-category">
            <span th:text="${groupDate.district}"></span> · <span th:text="${groupDate.categoryMain.categoryMainName}"></span>
          </div>
          <div class="card-title" th:text="${groupDate.title}">
          </div>
          <div class="card-date" th:text="${#temporals.format(groupDate.groupDate, 'yyyy.MM.dd(E) HH:mm')}"></div>
        </div>
      </div>
    </div>
  </section>



  <!-- ─── Footer ─── -->
  <footer class="footer">
    <div class="footer-links">
      <a href="#"        class="footer-link">회사소개</a><span class="footer-divider"></span>
      <a href="#"  class="footer-link">제휴안내</a><span class="footer-divider"></span>
      <a href="#"  class="footer-link">광고안내</a><span class="footer-divider"></span>
      <a href="#"        class="footer-link">이용약관</a><span class="footer-divider"></span>
      <a href="#"      class="footer-link">개인정보처리방침</a><span class="footer-divider"></span>
      <a href="#" class="footer-link">청소년보호정책</a>
    </div>
    <div class="footer-copyright">© 1999 – 2025 dcinside. All rights reserved.</div>
  </footer>
</div>

<!-- ============= [simple.html 전용 영역] ============= -->

<!-- 1. 플로팅 간편매칭 버튼 -->
<button id="open-filter-btn" class="fixed bottom-10 right-10 bg-white text-blue-700 border-2 border-blue-700 px-6 py-4 rounded-full font-bold shadow-xl hover:bg-blue-50 transition-all duration-300 hover:scale-105 flex items-center gap-2 z-40">
  <ion-icon name="options-outline" class="text-xl"></ion-icon>
  <span>간편 매칭</span>
</button>
<!-- 2. 필터 모달 -->
<div id="filter-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50 hidden">
  <div class="filter-modal-card">
    <!-- Screen 1: Filter Settings -->
    <div id="filter-content" class="h-full flex flex-col">
      <div class="px-8 pb-4 pt-6 flex justify-between items-center">
        <h2 class="text-2xl font-bold text-gray-900">나에게 맞는 모임 찾기</h2>
        <button id="close-filter-btn" class="w-12 h-12 rounded-full text-gray-500 hover:bg-gray-100 flex items-center justify-center">
          <ion-icon name="close-outline" class="text-2xl"></ion-icon>
        </button>
      </div>
      <div class="filter-modal-content p-8 pt-4">
        <div class="tags-container">
          <div class="tag-item" data-tag="운동/액티비티"><span class="label">운동/액티비티</span></div>
          <div class="tag-item" data-tag="문화/예술"><span class="label">문화/예술</span></div>
          <div class="tag-item" data-tag="지식/스터디"><span class="label">지식/스터디</span></div>
          <div class="tag-item" data-tag="음식/카페"><span class="label">음식/카페</span></div>
          <div class="tag-item" data-tag="여행/탐험"><span class="label">여행/탐험</span></div>
          <div class="tag-item" data-tag="게임/오락"><span class="label">게임/오락</span></div>
          <div class="tag-item" data-tag="반려동물"><span class="label">반려동물</span></div>
          <div class="tag-item" data-tag="만들기/공예"><span class="label">만들기/공예</span></div>
          <div class="tag-item" data-tag="소셜/친목"><span class="label">소셜/친목</span></div>
        </div>
        <hr class="filter-divider">
        <div class="text-center">
          <div class="age-value"><span id="minAgeDisplay">20</span> – <span id="maxAgeDisplay">50</span>세</div>
          <div id="age-slider"></div>
        </div>
        <hr class="filter-divider">
        <div class="segmented-control">
          <label class="seg-label"><input type="radio" name="gender" value="누구나" checked><span class="seg-btn">누구나</span></label>
          <label class="seg-label"><input type="radio" name="gender" value="남자만"><span class="seg-btn">남자만</span></label>
          <label class="seg-label"><input type="radio" name="gender" value="여자만"><span class="seg-btn">여자만</span></label>
        </div>
      </div>
      <div class="p-6 bg-gray-50 border-t">
        <button id="matchButton" class="btn-match" disabled>필터 적용하기</button>
      </div>
    </div>

    <!-- Screen 2: Filter Results (hidden by default) -->
    <div id="results-content" class="h-full flex flex-col hidden">
      <div class="px-8 pb-4 pt-6 flex justify-between items-center">
        <button id="back-to-filters-btn" class="w-12 h-12 rounded-full text-gray-500 hover:bg-gray-100 flex items-center justify-center">
          <ion-icon name="arrow-back-outline" class="text-2xl"></ion-icon>
        </button>
        <h2 class="text-2xl font-bold text-gray-900">매칭된 모임</h2>
        <div class="w-12 h-12"></div>
      </div>
      <div class="px-8 pb-2">
        <div id="applied-filters-display" class="flex flex-wrap items-center gap-2"></div>
      </div>
      <div class="filter-modal-content p-8 pt-4">
        <div id="results-list"></div>
      </div>
    </div>
  </div>
</div>
<!-- 3. 상세 모달 -->
<div id="room-detail-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50 hidden">
  <div class="bg-white rounded-2xl w-full max-w-lg p-8 relative">
    <button id="close-room-detail-btn" class="absolute top-4 right-4 w-10 h-10 rounded-full text-gray-500 hover:bg-gray-100 flex items-center justify-center">
      <ion-icon name="close-outline" class="text-2xl"></ion-icon>
    </button>
    <h2 id="room-detail-title" class="text-2xl font-bold mb-4"></h2>
    <p class="text-gray-600 mb-6">모임 상세 내용이 여기에 표시됩니다. (예: 장소, 시간, 소개, 참여 멤버 등)</p>
    <div class="bg-gray-100 p-4 rounded-lg mb-6">
      <p><strong>주최자:</strong> 김모임</p>
      <p><strong>참여인원:</strong> 3 / 8 명</p>
    </div>
    <button class="w-full bg-blue-500 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-600">참여하기</button>
  </div>
</div>

<!-- ============= [알림/프사 템플릿, notify와 dev-login 연결] ============= -->
<template id="template-nav-user">
  <div class="noti-bell select-none relative mr-2 cursor-pointer">
    <ion-icon name="notifications-outline" class="text-2xl"></ion-icon>
    <span class="noti-bell__badge noti-badge"></span>
  </div>
  <div class="profile-thumb" title="마이페이지">
    <img src="" alt="프로필 썸네일" />
  </div>
</template>
<template id="template-noti-popover">
  <div class="noti-popover flex flex-col">
    <div class="flex justify-between items-center px-4 py-2 border-b border-gray-100 bg-white/95">
      <h2 class="font-semibold text-gray-900 text-base">알림</h2>
      <div class="flex items-center space-x-3 text-sm">
        <button id="mark-all-read-btn"  class="text-blue-600 hover:text-blue-800">전체 읽음</button>
        <button id="delete-read-btn"    class="text-gray-600 hover:text-gray-800">읽은 삭제</button>
      </div>
    </div>
    <div id="noti-list" class="flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50"></div>
  </div>
</template>
<template id="template-noti-card">
  <article class="noti-card flex gap-3 relative" data-id="" data-read="false" data-href="#">
    <div class="noti-card__icon w-6 h-6 flex items-center justify-center">
      <ion-icon name="alert-circle-outline"></ion-icon>
    </div>
    <div class="flex-1 pr-8">
      <p class="noti-card__message text-sm text-gray-900"></p>
      <time class="noti-card__time text-xs text-gray-500"></time>
    </div>
    <button class="noti-card__dismiss-btn absolute top-2 right-2 text-gray-400 hover:text-gray-600">
      <ion-icon name="close-outline" class="text-lg"></ion-icon>
    </button>
  </article>
</template>

<!-- ============= [모든 JS 연결] ============= -->
<script src="/js/notify.js" defer></script>
<script src="/js/dev-login.js" defer></script>
<script src="/js/filter.js" defer></script> <!-- simple.html 기능 js 분리 -->
<script src="/js/mainHomePage.js"></script>
<script>
  $(document).ready(function () {
  const $wrapper = $('.banner-slide-wrapper');
  const slideCount = $wrapper.children().length;
  let current = 0;

  function goToSlide(index) {
    const percent = (100 / slideCount) * index;
    $wrapper.css('transform', `translateX(-${percent}%)`);
  }

  $('.banner-next').click(function () {
    current = (current + 1) % slideCount;
    goToSlide(current);
  });

  $('.banner-prev').click(function () {
    current = (current - 1 + slideCount) % slideCount;
    goToSlide(current);
  });

  goToSlide(0); // 초기 위치
});

</script>


</body>
</html>
