<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ğŸ“‹ ììœ  ê²Œì‹œíŒ</title>

  <!-- CSS íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸° -->
  <link rel="stylesheet" th:href="@{/css/boardstyle.css}" />
  <link rel="stylesheet" th:href="@{/css/vars.css}" />
  <link rel="stylesheet" th:href="@{/css/mainstyle.css}" />

  <style>
    table {
      width: 100%;
      border-collapse: collapse;
    }
    th, td {
      padding: 10px;
      border-bottom: 1px solid #ddd;
      text-align: left;
    }
    th {
      background-color: #f2f2f2;
    }
    a {
      text-decoration: none;
      color: #333;
    }
    a:hover {
      text-decoration: underline;
    }
    .write-button {
      margin-bottom: 15px;
    }
    .sort-buttons a {
  padding: 6px 12px;
  font-family: var(--font-pretendard-medium);
  font-size: 14px;
  border: 1px solid var(--color-grey-80);
  border-radius: 4px;
  background: var(--color-white-solid);
  cursor: pointer;
  transition: background 0.2s;
  display: inline-block;
}

.sort-buttons a:hover {
  background: var(--color-grey-96);
}

.sort-buttons a.active {
  background: var(--color-pigment-indigo);
  color: var(--color-white-solid);
  border-color: var(--color-pigment-indigo);
}

.board-table th:nth-child(3), /* ì œëª© */
.board-table td:nth-child(3) {
  width: 35%;
}

.board-table th:nth-child(4), /* ì‘ì„±ì */
.board-table td:nth-child(4) {
  width: 15%;

    select {
      font-family: inherit;
      font-size: inherit;
      background-color: transparent;
      border: none;
      outline: none;
      cursor: pointer;
    }
}
  </style>
</head>
<body>

<!-- ìƒë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
<nav class="container-nav">
  <div class="nav-left">
    <a th:href="@{/main}">
      <img class="logo" src="/img/icons/MT5.png" alt="M ë¡œê³ " />
    </a>
  </div>
  <div class="nav-right">
    <a th:href="@{/login}">ë¡œê·¸ì¸Â·íšŒì›ê°€ì…</a>
  </div>
</nav>

<!-- í•˜ë‹¨ ì„œë¸Œ ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
<nav class="sub-nav">
  <a th:href="@{/meetingcreate}">ëª¨ì„ìƒì„±</a>
  <a th:href="@{/meetings}">ëª¨ì„ëª©ë¡</a>
  <a th:href="@{/products}">ìƒí’ˆëª©ë¡</a>
  <a th:href="@{/posts}">ììœ  ê²Œì‹œíŒ</a>
</nav>

<section class="board-wrapper">
  <div class="board-header">
    <h2>ììœ  ê²Œì‹œíŒ</h2>
    <a th:href="@{/posts/write}" class="btn-new-post">âœš ìƒˆ ê¸€ ì‘ì„±</a>
  </div>

  <!-- ì •ë ¬ ë²„íŠ¼ -->
  <div class="sort-buttons">
    <a th:href="@{/posts(sort='new', category=${category})}" th:classappend="${sort == 'new'} ? 'active'">ìµœì‹ ìˆœ</a>
    <a th:href="@{/posts(sort='views', category=${category})}" th:classappend="${sort == 'views'} ? 'active'">ì¡°íšŒìˆœ</a>
    <a th:href="@{/posts(sort='likes', category=${category})}" th:classappend="${sort == 'likes'} ? 'active'">ì¶”ì²œìˆœ</a>
  </div>
  <!-- ê²Œì‹œê¸€ í…Œì´ë¸” -->
  <table class="board-table">
    <thead>
    <tr>
      <th>ë²ˆí˜¸</th>
      <th>
        <form method="get" th:action="@{/posts}">
          <select name="category" onchange="this.form.submit()" style="border: none; background: transparent; font-weight: bold;">
            <option th:value="''" th:selected="${category == null}">ì¹´í…Œê³ ë¦¬</option>
            <option th:value="'ê³µì§€'" th:selected="${category == 'ê³µì§€'}">ê³µì§€</option>
            <option th:value="'ììœ '" th:selected="${category == 'ììœ '}">ììœ </option>
            <option th:value="'ì§ˆë¬¸'" th:selected="${category == 'ì§ˆë¬¸'}">ì§ˆë¬¸</option>
            <option th:value="'ì •ë³´'" th:selected="${category == 'ì •ë³´'}">ì •ë³´</option>
          </select>

          <!-- í˜„ì¬ ì •ë ¬ ìƒíƒœ ìœ ì§€ -->
          <input type="hidden" name="sort" th:value="${sort}" />
        </form>
      </th>
      <th>ì œëª©</th>
      <th>ì‘ì„±ì</th>
      <th>ì¡°íšŒìˆ˜</th>
      <th>ì¶”ì²œìˆ˜</th>
      <th>ì‘ì„±ì¼</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="post : ${posts}">
      <td th:text="${post.postIdx}">1</td>
      <td th:text="${post.category}">ì¹´í…Œê³ ë¦¬</td>
      <td>
        <!--<a th:href="@{'/posts/' + ${post.postIdx} + '?page=' + ${currentPage}}"
           th:text="${post.title}">ì œëª©</a>-->
        <a th:href="@{'/posts/' + ${post.postIdx} +
              '?page=' + ${currentPage} +
              '&category=' + ${category} +
              '&sort=' + ${sort} +
              '&keyword=' + ${keyword}}">
          <span th:text="${post.title}">ì œëª©</span>
        </a>
        <span th:if="${post.commentCount > 0}" th:text="'(' + ${post.commentCount} + ')'">(0)</span>
      </td>
      <td th:text="${post.authorName}">ì‘ì„±ì</td>
      <td th:text="${post.viewCount}">0</td>
      <td th:text="${post.likeCount}">0</td>
      <td th:text="${#dates.format(post.createdAt, 'yyyy-MM-dd HH:mm')}">2025-06-09</td>
    </tr>
    <tr th:if="${#lists.isEmpty(posts)}">
      <td colspan="7"><i>ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</i></td>
    </tr>
    </tbody>
  </table>

  <!-- í˜ì´ì§• -->
  <div class="pagination" style="margin-top: 20px; text-align: center;">
    <span th:if="${currentPage > 1}">
      <a th:href="@{/posts(page=${currentPage - 1}, category=${category}, sort=${sort}, keyword=${keyword})}">
      â—€ ì´ì „ </a>
    </span>

    <span th:each="i : ${#numbers.sequence(1, totalPages)}">
    <a th:href="@{/posts(page=${i}, category=${category}, sort=${sort}, keyword=${keyword})}"
       th:text="${i}"
       th:classappend="${i == currentPage} ? 'active' : ''"
       style="margin: 0 5px;">1</a>
    </span>

    <span th:if="${currentPage < totalPages}">
      <a th:href="@{/posts(page=${currentPage + 1}, category=${category}, sort=${sort}, keyword=${keyword})}">
      ë‹¤ìŒ â–¶ </a>
    </span>
  </div>
</section>

<script>
</script>

</body>
</html>
